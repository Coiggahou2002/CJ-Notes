# DNS 协议

Domain Name System，域名管理系统

## DNS 服务器

DNS 规范中规定了 2 种 DNS 服务器：

+ 主 DNS 服务器
+ 辅助 DNS 服务器

当一个辅助 DNS 服务器启动时，它需要与主 DNS 服务器通信，并加载数据信息，这个过程叫**区域传输(Zone Transfer)**.

另外，辅助 DNS 服务器还会定时向主 DNS 服务器进行查询以了解数据是否有变动，如果有变动就会执行一次区域传输，进行数据同步

## 传输协议

DNS 默认占用 UDP 和 TCP 的 53 端口.

DNS 协议除了在区域传输的时候使用 TCP 协议，其他时候使用的都是 UDP 协议.

**为什么区域传输的时候使用 TCP ？**

+ 数据量大，超过了 UDP 传输的数据长度限制
+ 保证数据可靠性

**为什么域名解析使用 UDP ？**

+ 一般客户端查询域名所需要内容不超过 512 字节
+ TCP 需要三次握手四次挥手，UDP 只需要一次请求一次应答，服务器响应快，负载低

